<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Managing SSL certificates &mdash; python-hpilo 4.4.3 documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="iLO information search" href="elasticsearch.html" />
    <link rel="prev" title="Deployment profiles" href="profile.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            python-hpilo
              <img src="_static/python-hpilo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                4.4.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing python-hpilo</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Access from Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="shell.html">Access from the shell</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="info.html">General server and iLO information</a></li>
<li class="toctree-l1"><a class="reference internal" href="networksettings.html">Network settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">iLO licensing</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security and SSL settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="health.html">Server health</a></li>
<li class="toctree-l1"><a class="reference internal" href="power.html">Power manipulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="boot.html">Boot settings and rebooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="media.html">Virtual media</a></li>
<li class="toctree-l1"><a class="reference internal" href="input.html">Keyboard and mouse settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="snmp.html">SNMP settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="firmware.html">Dealing with iLO firmware updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="xmldata.html">Unauthenticated iLO and Chassis OA data</a></li>
<li class="toctree-l1"><a class="reference internal" href="log.html">iLO event log</a></li>
<li class="toctree-l1"><a class="reference internal" href="federation.html">Federation groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="ahs.html">Active Health System and Insight Remote Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="profile.html">Deployment profiles</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Managing SSL certificates</a></li>
<li class="toctree-l1"><a class="reference internal" href="elasticsearch.html">iLO information search</a></li>
<li class="toctree-l1"><a class="reference internal" href="autofirmware.html">Automated firmware updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="puppet.html">Managing iLO’s with puppet</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Common issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">python-hpilo</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Managing SSL certificates</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="managing-ssl-certificates">
<h1>Managing SSL certificates<a class="headerlink" href="#managing-ssl-certificates" title="Permalink to this headline">¶</a></h1>
<p>When managing large amounts of iLO interfaces, the constant SSL warnings are a
nuisance, so let’s make sure we have proper SSL certificates. This script will
make that easy to do for you by taking care of all the CA work. All you need to
do is add the CA’s certificate to your browsers trusted CA list.</p>
<p>First thing to do is configure the CA. Add something like the following to your
<code class="file docutils literal notranslate"><span class="pre">~/.ilo.conf</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ca</span><span class="p">]</span>
<span class="n">path</span> <span class="o">=</span> <span class="o">~/.</span><span class="n">hpilo_ca</span>
<span class="n">country</span> <span class="o">=</span> <span class="n">NL</span>
<span class="n">state</span> <span class="o">=</span> <span class="n">Flevoland</span>
<span class="n">locality</span> <span class="o">=</span> <span class="n">Lelystad</span>
<span class="n">organization</span> <span class="o">=</span> <span class="n">Kaarsemaker</span><span class="o">.</span><span class="n">net</span>
<span class="n">organizational_unit</span> <span class="o">=</span> <span class="n">Sysadmin</span>
</pre></div>
</div>
<p>This path can point to an existing CA, the only requirement is that
<code class="file docutils literal notranslate"><span class="pre">openssl.cnf</span></code> for this CA lives inside that directory. The other config
values are used when generating the certificates for the iLOs and are all
optional, they default to what HP puts in there.</p>
<p>If the CA does not yet exist, you can create it as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ hpilo_ca init
Generating RSA private key, 2048 bit long modulus
.+++
..................+++
e is 65537 (0x10001)
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter &#39;.&#39;, the field will be left blank.
-----
Country Name (2 letter code) [NL]:
State or Province Name (full name) [Flevoland]:
Locality Name (eg, city) [Lelystad]:
Organization Name (eg, company) [Kaarsemaker.net]:
Common Name (eg, your name or your servers hostname) [hpilo_ca]:
</pre></div>
</div>
<p>This generates the needed directories, an openssl config and a self-signed
certificate for your CA.</p>
<p>When your CA is set up, you can start signing certificates. <code class="file docutils literal notranslate"><span class="pre">hpilo_ca</span></code>
will check several things:</p>
<blockquote>
<div><ul class="simple">
<li><p>Firmware is upgraded if necessary</p></li>
<li><p>The hostname is set to the name you use to connect to it, if needed</p></li>
<li><p>iLO2 is configured to use FQDN’s for certificate signing requests</p></li>
</ul>
</div></blockquote>
<p>It will then download the certificate signing request, sign it and upload the
signed certificate. Here’s an example of it at work:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./hpilo_ca sign example-server.int.kaarsemaker.net
(1/5) Checking certificate config of example-server.int.kaarsemaker.net
(2/5) Retrieving certificate signing request
(3/5) Signing certificate
Using configuration from /home/dennis/.hpilo_ca/openssl.cnf
Check that the request matches the signature
Signature ok
Certificate Details:
        Serial Number: 4 (0x4)
        Validity
            Not Before: Oct  5 09:48:26 2015 GMT
            Not After : Oct  3 09:48:26 2020 GMT
        Subject:
            countryName               = NL
            stateOrProvinceName       = Flevoland
            organizationName          = Kaarsemaker.net
            organizationalUnitName    = Sysadmin
            commonName                = example-server.int.kaarsemaker.net
        X509v3 extensions:
            X509v3 Basic Constraints:
                CA:FALSE
            X509v3 Subject Key Identifier:
                59:E5:B8:37:C5:30:8D:38:47:29:3E:C1:0E:B3:0A:97:95:48:3E:D1
            X509v3 Authority Key Identifier:
                keyid:89:17:37:C5:E3:2D:EA:5C:83:0A:52:36:79:B0:EC:B7:A4:D5:D4:EF

            Netscape Comment:
                Certificate generated by iLO CA
            X509v3 Subject Alternative Name
                DNS:example-server.int.kaarsemaker.net, DNS:example-server, IP Address:10.4.2.13
Certificate is to be certified until Oct  3 09:48:26 2020 GMT (1825 days)

Write out database with 1 new entries
Data Base Updated
(4/5) Uploading certificate
(5/5) Resetting iLO
</pre></div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="profile.html" class="btn btn-neutral float-left" title="Deployment profiles" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="elasticsearch.html" class="btn btn-neutral float-right" title="iLO information search" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2011-2020, Dennis Kaarsemaker.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>